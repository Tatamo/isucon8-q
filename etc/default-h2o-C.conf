user: isucon

access-log:
  path: /var/log/h2o/access.log
  # format: "remote_address:%h\tremote_logname:%l\tremote_user:%u\trequest_time:%{%Y/%m/%d:%H:%M:%S}t\trequest_line:\"%r\"\tstatus_code:%s\tsize_of_the_response_body:%b\tuser_agent:\"%{User-agent}i\"\treferer:\"%{Referer}i\""
  format: "time:%{%Y-%m-%dT%H:%M:%S}t\thost:%h\tmethod:%m\tstatus:%s\turi:%U\tsize:%b\treqtime:%{process-time}x\tuser_agent:%{user-agent}i"
error-log: /var/log/h2o/error.log
pid-file: /var/run/h2o/h2o.pid

hosts:
  "localhost:80":
    listen:
      port: 80
      host: 0.0.0.0
    paths:
      "/favicon.ico":
        file.file: /home/isucon/torb/webapp/static/favicon.ico
        header.set: "Cache-Control: public, max-age=86400"
      "/css":
        file.dir: /home/isucon/torb/webapp/static/css
        header.set: "Cache-Control: public, max-age=86400"
      "/img":
        file.dir: /home/isucon/torb/webapp/static/img
      "/js":
        file.dir: /home/isucon/torb/webapp/static/js
        header.set: "Cache-Control: public, max-age=86400"
      "/initialize":
        proxy.reverse.url: http://172.17.39.3:8080/
        proxy.preserve-host: ON
      "/api/users":
        proxy.reverse.url: http://172.17.39.2/
        proxy.preserve-host: ON
      "/":
        proxy.reverse.url: http://127.0.0.1/
        proxy.preserve-host: ON
